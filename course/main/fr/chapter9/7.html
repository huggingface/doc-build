<meta charset="utf-8" /><meta http-equiv="content-security-policy" content=""><meta name="hf:doc:metadata" content="{&quot;local&quot;:&quot;introduction-la-classe-iblocksi&quot;,&quot;sections&quot;:[{&quot;local&quot;:&quot;pourquoi-iblocksi&quot;,&quot;title&quot;:&quot;Pourquoi &lt;i&gt;Blocks&lt;/i&gt; üß± ?&quot;},{&quot;local&quot;:&quot;cration-dune-dmo-simple-en-utilisant-iblocksi&quot;,&quot;title&quot;:&quot;Cr√©ation d&#39;une d√©mo simple en utilisant &lt;i&gt;Blocks&lt;/i&gt;&quot;},{&quot;local&quot;:&quot;personnaliser-la-mise-en-page-de-votre-dmo&quot;,&quot;title&quot;:&quot;Personnaliser la mise en page de votre d√©mo&quot;},{&quot;local&quot;:&quot;exploration-des-vnements-et-de-ltat&quot;,&quot;title&quot;:&quot;Exploration des √©v√©nements et de l&#39;√©tat&quot;},{&quot;local&quot;:&quot;cration-de-dmos-multitapes&quot;,&quot;title&quot;:&quot;Cr√©ation de d√©mos multi-√©tapes&quot;},{&quot;local&quot;:&quot;mise-jour-des-proprits-des-composants&quot;,&quot;title&quot;:&quot;Mise √† jour des propri√©t√©s des composants&quot;}],&quot;title&quot;:&quot;Introduction √† la classe &lt;i&gt;Blocks&lt;/i&gt;&quot;}" data-svelte="svelte-1phssyn">
	<link rel="modulepreload" href="/docs/course/main/fr/_app/assets/pages/__layout.svelte-hf-doc-builder.css">
	<link rel="modulepreload" href="/docs/course/main/fr/_app/start-hf-doc-builder.js">
	<link rel="modulepreload" href="/docs/course/main/fr/_app/chunks/vendor-hf-doc-builder.js">
	<link rel="modulepreload" href="/docs/course/main/fr/_app/chunks/paths-hf-doc-builder.js">
	<link rel="modulepreload" href="/docs/course/main/fr/_app/pages/__layout.svelte-hf-doc-builder.js">
	<link rel="modulepreload" href="/docs/course/main/fr/_app/pages/chapter9/7.mdx-hf-doc-builder.js">
	<link rel="modulepreload" href="/docs/course/main/fr/_app/chunks/Tip-hf-doc-builder.js">
	<link rel="modulepreload" href="/docs/course/main/fr/_app/chunks/IconCopyLink-hf-doc-builder.js">
	<link rel="modulepreload" href="/docs/course/main/fr/_app/chunks/CodeBlock-hf-doc-builder.js">
	<link rel="modulepreload" href="/docs/course/main/fr/_app/chunks/CourseFloatingBanner-hf-doc-builder.js"> 





<h1 class="relative group"><a id="introduction-la-classe-iblocksi" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#introduction-la-classe-iblocksi"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a>
	<span>Introduction √† la classe <i>Blocks</i></span></h1>



<div class="flex space-x-1 absolute z-10 right-0 top-0"><a href="https://discuss.huggingface.co/t/chapter-9-questions" target="_blank"><img alt="Ask a Question" class="!m-0" src="https://img.shields.io/badge/Ask%20a%20question-ffcb4c.svg?logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgLTEgMTA0IDEwNiI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiMyMzFmMjA7fS5jbHMtMntmaWxsOiNmZmY5YWU7fS5jbHMtM3tmaWxsOiMwMGFlZWY7fS5jbHMtNHtmaWxsOiMwMGE5NGY7fS5jbHMtNXtmaWxsOiNmMTVkMjI7fS5jbHMtNntmaWxsOiNlMzFiMjM7fTwvc3R5bGU+PC9kZWZzPjx0aXRsZT5EaXNjb3Vyc2VfbG9nbzwvdGl0bGU+PGcgaWQ9IkxheWVyXzIiPjxnIGlkPSJMYXllcl8zIj48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik01MS44NywwQzIzLjcxLDAsMCwyMi44MywwLDUxYzAsLjkxLDAsNTIuODEsMCw1Mi44MWw1MS44Ni0uMDVjMjguMTYsMCw1MS0yMy43MSw1MS01MS44N1M4MCwwLDUxLjg3LDBaIi8+PHBhdGggY2xhc3M9ImNscy0yIiBkPSJNNTIuMzcsMTkuNzRBMzEuNjIsMzEuNjIsMCwwLDAsMjQuNTgsNjYuNDFsLTUuNzIsMTguNEwzOS40LDgwLjE3YTMxLjYxLDMxLjYxLDAsMSwwLDEzLTYwLjQzWiIvPjxwYXRoIGNsYXNzPSJjbHMtMyIgZD0iTTc3LjQ1LDMyLjEyYTMxLjYsMzEuNiwwLDAsMS0zOC4wNSw0OEwxOC44Niw4NC44MmwyMC45MS0yLjQ3QTMxLjYsMzEuNiwwLDAsMCw3Ny40NSwzMi4xMloiLz48cGF0aCBjbGFzcz0iY2xzLTQiIGQ9Ik03MS42MywyNi4yOUEzMS42LDMxLjYsMCwwLDEsMzguOCw3OEwxOC44Niw4NC44MiwzOS40LDgwLjE3QTMxLjYsMzEuNiwwLDAsMCw3MS42MywyNi4yOVoiLz48cGF0aCBjbGFzcz0iY2xzLTUiIGQ9Ik0yNi40Nyw2Ny4xMWEzMS42MSwzMS42MSwwLDAsMSw1MS0zNUEzMS42MSwzMS42MSwwLDAsMCwyNC41OCw2Ni40MWwtNS43MiwxOC40WiIvPjxwYXRoIGNsYXNzPSJjbHMtNiIgZD0iTTI0LjU4LDY2LjQxQTMxLjYxLDMxLjYxLDAsMCwxLDcxLjYzLDI2LjI5YTMxLjYxLDMxLjYxLDAsMCwwLTQ5LDM5LjYzbC0zLjc2LDE4LjlaIi8+PC9nPjwvZz48L3N2Zz4="></a>
	<a href="https://colab.research.google.com/github/huggingface/notebooks/blob/master/course/fr/chapter9/section7.ipynb" target="_blank"><img alt="Open In Colab" class="!m-0" src="https://colab.research.google.com/assets/colab-badge.svg"></a>
	<a href="https://studiolab.sagemaker.aws/import/github/huggingface/notebooks/blob/master/course/fr/chapter9/section7.ipynb" target="_blank"><img alt="Open In Studio Lab" class="!m-0" src="https://studiolab.sagemaker.aws/studiolab.svg"></a></div>
<p>Dans les sections pr√©c√©dentes, nous avons explor√© et cr√©√© des d√©mos en utilisant la classe <code>Interface</code>. Dans cette section, nous allons pr√©senter une <strong>nouvelle</strong> API de bas niveau appel√©e <code>gradio.Blocks</code>.</p>
<p>Quelle est la diff√©rence entre <code>Interface</code> et <code>Blocks</code> ?</p>
<ul><li><p>‚ö° <code>Interface</code> : une API de haut niveau qui vous permet de cr√©er une d√©mo compl√®te d‚Äôapprentissage automatique simplement en fournissant une liste d‚Äôentr√©es et de sorties.</p></li>
<li><p>üß± <code>Blocks</code> : une API de bas niveau qui vous permet d‚Äôavoir un contr√¥le total sur les flux de donn√©es et la disposition de votre application. Vous pouvez construire des applications tr√®s complexes, en plusieurs √©tapes, en utilisant <code>Blocks</code>.</p></li></ul>
<h3 class="relative group"><a id="pourquoi-iblocksi" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#pourquoi-iblocksi"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a>
	<span>Pourquoi <i>Blocks</i> üß± ?
	</span></h3>

<p>Comme nous l‚Äôavons vu dans les sections pr√©c√©dentes, la classe <code>Interface</code> vous permet de cr√©er facilement des d√©mos d‚Äôapprentissage automatique √† part enti√®re avec seulement quelques lignes de code. L‚ÄôAPI <code>Interface</code> est extr√™mement facile √† utiliser, mais elle n‚Äôa pas la flexibilit√© qu‚Äôoffre l‚ÄôAPI <code>Blocks</code>. Par exemple, vous pourriez vouloir :</p>
<ul><li>regrouper des d√©mos connexes sous forme d‚Äôonglets multiples dans une application web,</li>
<li>modifier la mise en page de votre d√©mo, par exemple pour sp√©cifier l‚Äôemplacement des entr√©es et des sorties,</li>
<li>disposer d‚Äôinterfaces multi-√©tapes dans lesquelles la sortie d‚Äôun mod√®le devient l‚Äôentr√©e du mod√®le suivant ou avoir des flux de donn√©es plus flexibles en g√©n√©ral,</li>
<li>modifier les propri√©t√©s d‚Äôun composant (par exemple, les choix dans une liste d√©roulante) ou sa visibilit√© en fonction des entr√©es de l‚Äôutilisateur.</li></ul>
<p>Nous allons explorer tous ces concepts ci-dessous.</p>
<h3 class="relative group"><a id="cration-dune-dmo-simple-en-utilisant-iblocksi" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#cration-dune-dmo-simple-en-utilisant-iblocksi"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a>
	<span>Cr√©ation d&#39;une d√©mo simple en utilisant <i>Blocks</i></span></h3>

<p>Apr√®s avoir install√© <em>Gradio</em>, ex√©cutez le code ci-dessous sous forme de script Python, de <em>notebook</em> Jupyter ou de <em>notebook</em> Colab.</p>

	<div class="code-block relative"><div class="absolute top-2.5 right-4"><button class="inline-flex items-center relative text-sm focus:text-green-500 cursor-pointer focus:outline-none transition duration-200 ease-in-out opacity-0 mx-0.5   text-gray-600 " title="code excerpt" type="button"><svg class="" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z" transform="translate(0)"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z" transform="translate(0)"></path><rect fill="none" width="32" height="32"></rect></svg>
	<div class="absolute pointer-events-none transition-opacity bg-black text-white py-1 px-2 leading-tight rounded font-normal shadow left-1/2 top-full transform -translate-x-1/2 translate-y-2 opacity-0"><div class="absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-black border-4 border-t-0" style="border-left-color: transparent; border-right-color: transparent; "></div>
	Copied</div></button></div>
	<pre><!-- HTML_TAG_START --><span class="hljs-keyword">import</span> gradio <span class="hljs-keyword">as</span> gr


<span class="hljs-keyword">def</span> <span class="hljs-title function_">flip_text</span>(<span class="hljs-params">x</span>):
    <span class="hljs-keyword">return</span> x[::-<span class="hljs-number">1</span>]


demo = gr.Blocks()

<span class="hljs-keyword">with</span> demo:
    gr.Markdown(
        <span class="hljs-string">&quot;&quot;&quot;
    # Flip Text!
    Start typing below to see the output.
    &quot;&quot;&quot;</span>
    )
    <span class="hljs-built_in">input</span> = gr.Textbox(placeholder=<span class="hljs-string">&quot;Flip this text&quot;</span>)
    output = gr.Textbox()

    <span class="hljs-built_in">input</span>.change(fn=flip_text, inputs=<span class="hljs-built_in">input</span>, outputs=output)

demo.launch()<!-- HTML_TAG_END --></pre></div>
<iframe src="https://hf.space/gradioiframe/course-demos/flip_text/+" frameborder="0" height="400" title="Gradio app" class="container p-0 flex-grow space-iframe" allow="accelerometer; ambient-light-sensor; autoplay; battery; camera; document-domain; encrypted-media; fullscreen; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; oversized-images; payment; picture-in-picture; publickey-credentials-get; sync-xhr; usb; vr ; wake-lock; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-downloads"></iframe>
<p>Ce simple exemple ci-dessus introduit 4 concepts qui sous-tendent les <em>Blocks</em> :</p>
<ol><li>Les <em>Blocks</em> vous permettent de construire des applications web qui combinent Markdown, HTML, boutons et composants interactifs simplement en instanciant des objets en Python dans un contexte <code>with gradio.Blocks</code>. </li></ol>


<div class="course-tip  bg-gradient-to-br dark:bg-gradient-to-r before:border-green-500 dark:before:border-green-800 from-green-50 dark:from-gray-900 to-white dark:to-gray-950 border border-green-50 text-green-700 dark:text-gray-400">üôãSi vous n&#39;√™tes pas familier avec l&#39;instruction `with` en Python, nous vous recommandons de consulter l&#39;excellent <a href="https://realpython.com/python-with-statement/">tutoriel</a> de Real Python. Revenez ici apr√®s l&#39;avoir lu ü§ó
</div>
<p>L‚Äôordre dans lequel vous instanciez les composants est important car chaque √©l√©ment est restitu√© dans l‚Äôapplication Web dans l‚Äôordre o√π il a √©t√© cr√©√©. (Les mises en page plus complexes sont abord√©es ci-dessous)</p>
<ol start="2"><li><p>Vous pouvez d√©finir des fonctions Python ordinaires n‚Äôimporte o√π dans votre code et les ex√©cuter avec des entr√©es utilisateur en utilisant les <code>Blocks</code>. Dans notre exemple, nous avons une fonction simple qui inverse le texte entr√© mais vous pouvez √©crire n‚Äôimporte quelle fonction Python, du simple calcul au traitement des pr√©dictions d‚Äôun mod√®le d‚Äôapprentissage automatique.</p></li>
<li><p>Vous pouvez assigner des √©v√©nements √† n‚Äôimporte quel composant <code>Blocks</code>. Ainsi, votre fonction sera ex√©cut√©e lorsque le composant sera cliqu√©, modifi√©, etc. Lorsque vous assignez un √©v√©nement, vous passez trois param√®tres : </p></li></ol>
<ul><li><code>fn</code> : la fonction qui doit √™tre appel√©e,  </li>
<li><code>inputs</code> : la (liste) des composants d‚Äôentr√©e  </li>
<li><code>outputs</code> : la (liste) des composants de sortie qui doivent √™tre appel√©s.<br>
Dans l‚Äôexemple ci-dessus, nous ex√©cutons la fonction <code>flip_text()</code> lorsque la valeur de la <code>Textbox</code> nomm√©e input <code>input</code> change. L‚Äô√©v√©nement lit la valeur dans <code>input</code>, la passe comme param√®tre de nom √† <code>flip_text()</code>, qui renvoie alors une valeur qui est assign√©e √† notre seconde <code>Textbox</code> nomm√©e <code>output</code>.
Pour voir la liste des √©v√©nements que chaque composant supporte, consultez la <a href="https://www.gradio.app/docs/" rel="nofollow">documentation</a> de <em>Gradio</em>.</li></ul>
<ol start="4"><li><em>Blocks</em> d√©termine automatiquement si un composant doit √™tre interactif (accepter les entr√©es de l‚Äôutilisateur) ou non, en fonction des d√©clencheurs d‚Äô√©v√©nements que vous d√©finissez. Dans notre exemple, la premi√®re zone de texte est interactive, puisque sa valeur est utilis√©e par la fonction <code>flip_text()</code>. La deuxi√®me zone de texte n‚Äôest pas interactive, puisque sa valeur n‚Äôest jamais utilis√©e comme entr√©e. Dans certains cas, vous voudrez peut-√™tre passer outre, ce que vous pouvez faire en passant un bool√©en au param√®tre <code>interactive</code> du composant (par exemple, <code>gr.Textbox(placeholder=&quot;Flip this text&quot;, interactive=True)</code>).</li></ol>
<h3 class="relative group"><a id="personnaliser-la-mise-en-page-de-votre-dmo" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#personnaliser-la-mise-en-page-de-votre-dmo"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a>
	<span>Personnaliser la mise en page de votre d√©mo
	</span></h3>

<p>Comment pouvons-nous utiliser <code>Blocks</code> pour personnaliser la mise en page de notre d√©mo ? Par d√©faut, <code>Blocks</code> affiche verticalement dans une colonne les composants que vous cr√©ez. Vous pouvez changer cela en cr√©ant des colonnes suppl√©mentaires <code>avec gradio.Column():</code> ou des lignes <code>avec gradio.Row():</code> et en cr√©ant des composants dans ces contextes.</p>
<p>Voici ce que vous devez garder √† l‚Äôesprit : tout composant cr√©√© sous une <code>Column</code> (c‚Äôest aussi le d√©faut) sera dispos√© verticalement. Tout composant cr√©√© sous une <code>Row</code> sera dispos√© horizontalement, comme le <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Basic_Concepts_of_Flexbox" rel="nofollow">mod√®le flexbox dans le d√©veloppement web</a>.</p>
<p>Enfin, vous pouvez √©galement cr√©er des onglets pour votre d√©mo en utilisant le gestionnaire de contexte <code>with gradio.Tabs()</code>. Dans ce contexte, vous pouvez cr√©er plusieurs onglets en sp√©cifiant des enfants <code>with gradio.TabItem(name_of_tab):</code>. Tout composant cr√©√© dans un contexte <code>with gradio.TabItem(name_of_tab):</code> appara√Æt dans cet onglet.</p>
<p>Maintenant, ajoutons une fonction <code>flip_image()</code> √† notre d√©mo et ajoutons un nouvel onglet qui retourne les images. Vous trouverez ci-dessous un exemple avec 2 onglets et utilisant √©galement une <code>Row</code> :</p>

	<div class="code-block relative"><div class="absolute top-2.5 right-4"><button class="inline-flex items-center relative text-sm focus:text-green-500 cursor-pointer focus:outline-none transition duration-200 ease-in-out opacity-0 mx-0.5   text-gray-600 " title="code excerpt" type="button"><svg class="" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z" transform="translate(0)"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z" transform="translate(0)"></path><rect fill="none" width="32" height="32"></rect></svg>
	<div class="absolute pointer-events-none transition-opacity bg-black text-white py-1 px-2 leading-tight rounded font-normal shadow left-1/2 top-full transform -translate-x-1/2 translate-y-2 opacity-0"><div class="absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-black border-4 border-t-0" style="border-left-color: transparent; border-right-color: transparent; "></div>
	Copied</div></button></div>
	<pre><!-- HTML_TAG_START --><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> gradio <span class="hljs-keyword">as</span> gr

demo = gr.Blocks()


<span class="hljs-keyword">def</span> <span class="hljs-title function_">flip_text</span>(<span class="hljs-params">x</span>):
    <span class="hljs-keyword">return</span> x[::-<span class="hljs-number">1</span>]


<span class="hljs-keyword">def</span> <span class="hljs-title function_">flip_image</span>(<span class="hljs-params">x</span>):
    <span class="hljs-keyword">return</span> np.fliplr(x)


<span class="hljs-keyword">with</span> demo:
    gr.Markdown(<span class="hljs-string">&quot;Flip text or image files using this demo.&quot;</span>)
    <span class="hljs-keyword">with</span> gr.Tabs():
        <span class="hljs-keyword">with</span> gr.TabItem(<span class="hljs-string">&quot;Flip Text&quot;</span>):
            <span class="hljs-keyword">with</span> gr.Row():
                text_input = gr.Textbox()
                text_output = gr.Textbox()
            text_button = gr.Button(<span class="hljs-string">&quot;Flip&quot;</span>)
        <span class="hljs-keyword">with</span> gr.TabItem(<span class="hljs-string">&quot;Flip Image&quot;</span>):
            <span class="hljs-keyword">with</span> gr.Row():
                image_input = gr.Image()
                image_output = gr.Image()
            image_button = gr.Button(<span class="hljs-string">&quot;Flip&quot;</span>)

    text_button.click(flip_text, inputs=text_input, outputs=text_output)
    image_button.click(flip_image, inputs=image_input, outputs=image_output)

demo.launch()<!-- HTML_TAG_END --></pre></div>
<iframe src="https://hf.space/gradioiframe/course-demos/flip_text_image/+" frameborder="0" height="450" title="Gradio app" class="container p-0 flex-grow space-iframe" allow="accelerometer; ambient-light-sensor; autoplay; battery; camera; document-domain; encrypted-media; fullscreen; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; oversized-images; payment; picture-in-picture; publickey-credentials-get; sync-xhr; usb; vr ; wake-lock; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-downloads"></iframe>
<p>Vous remarquerez que dans cet exemple, nous avons √©galement cr√©√© un composant <code>Button</code> dans chaque onglet et avons assign√© un √©v√©nement de clic √† chaque bouton qui est l‚Äô√©l√©ment qui ex√©cute r√©ellement la fonction.</p>
<h3 class="relative group"><a id="exploration-des-vnements-et-de-ltat" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#exploration-des-vnements-et-de-ltat"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a>
	<span>Exploration des √©v√©nements et de l&#39;√©tat
	</span></h3>

<p>De la m√™me mani√®re que vous pouvez contr√¥ler la mise en page, <code>Blocks</code> vous donne un contr√¥le fin sur les √©v√©nements qui d√©clenchent les appels de fonction. Chaque composant et de nombreux layouts ont des √©v√©nements sp√©cifiques qu‚Äôils supportent.</p>
<p>Par exemple, le composant <code>Textbox</code> a 2 √©v√©nements : <code>change()</code> (lorsque la valeur contenue dans la zone de texte change), et <code>submit()</code> (lorsqu‚Äôun utilisateur appuie sur la touche Entr√©e alors qu‚Äôil est concentr√© sur la zone de texte). Les composants plus complexes peuvent avoir encore plus d‚Äô√©v√©nements : par exemple, le composant <code>Audio</code> a aussi des √©v√©nements s√©par√©s pour quand le fichier audio est jou√©, effac√©, mis en pause, etc. Consultez la documentation pour conna√Ætre les √©v√©nements pris en charge par chaque composant.</p>
<p>Vous pouvez attacher un d√©clencheur d‚Äô√©v√©nement √† aucun, un ou plusieurs de ces √©v√©nements. Vous cr√©ez un d√©clencheur d‚Äô√©v√©nement en appelant le nom de l‚Äô√©v√©nement sur l‚Äôinstance du composant comme une fonction. Par exemple, <code>textbox.change(...)</code> ou <code>btn.click(...)</code>. La fonction prend trois param√®tres, comme indiqu√© ci-dessus :</p>
<ul><li><code>fn</code> : la fonction √† ex√©cuter</li>
<li><code>inputs</code> : une (liste de) composante(s) dont les valeurs doivent √™tre fournies comme param√®tres d‚Äôentr√©e √† la fonction. La valeur de chaque composant est mise en correspondance avec le param√®tre de fonction correspondant, dans l‚Äôordre. Ce param√®tre peut √™tre <code>None</code> si la fonction ne prend aucun param√®tre.</li>
<li><code>outputs</code> : un (liste de) composant(s) dont les valeurs doivent √™tre mises √† jour en fonction des valeurs retourn√©es par la fonction. Chaque valeur de retour met √† jour la valeur du composant correspondant, dans l‚Äôordre. Ce param√®tre peut √™tre None si la fonction ne retourne rien.</li></ul>
<p>Vous pouvez m√™me faire en sorte que le composant d‚Äôentr√©e et de sortie soit le m√™me composant, comme nous le faisons dans cet exemple qui utilise un mod√®le GPT pour compl√©ter du texte :</p>

	<div class="code-block relative"><div class="absolute top-2.5 right-4"><button class="inline-flex items-center relative text-sm focus:text-green-500 cursor-pointer focus:outline-none transition duration-200 ease-in-out opacity-0 mx-0.5   text-gray-600 " title="code excerpt" type="button"><svg class="" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z" transform="translate(0)"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z" transform="translate(0)"></path><rect fill="none" width="32" height="32"></rect></svg>
	<div class="absolute pointer-events-none transition-opacity bg-black text-white py-1 px-2 leading-tight rounded font-normal shadow left-1/2 top-full transform -translate-x-1/2 translate-y-2 opacity-0"><div class="absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-black border-4 border-t-0" style="border-left-color: transparent; border-right-color: transparent; "></div>
	Copied</div></button></div>
	<pre><!-- HTML_TAG_START --><span class="hljs-keyword">import</span> gradio <span class="hljs-keyword">as</span> gr

api = gr.Interface.load(<span class="hljs-string">&quot;huggingface/EleutherAI/gpt-j-6B&quot;</span>)


<span class="hljs-keyword">def</span> <span class="hljs-title function_">complete_with_gpt</span>(<span class="hljs-params">text</span>):
    <span class="hljs-comment"># Utilise les 50 derniers caract√®res du texte comme contexte.</span>
    <span class="hljs-keyword">return</span> text[:-<span class="hljs-number">50</span>] + api(text[-<span class="hljs-number">50</span>:])


<span class="hljs-keyword">with</span> gr.Blocks() <span class="hljs-keyword">as</span> demo:
    textbox = gr.Textbox(placeholder=<span class="hljs-string">&quot;Type here and press enter...&quot;</span>, lines=<span class="hljs-number">4</span>)
    btn = gr.Button(<span class="hljs-string">&quot;Generate&quot;</span>)

    btn.click(complete_with_gpt, textbox, textbox)

demo.launch()<!-- HTML_TAG_END --></pre></div>
<iframe src="https://hf.space/gradioiframe/course-demos/blocks_gpt/+" frameborder="0" height="300" title="Gradio app" class="container p-0 flex-grow space-iframe" allow="accelerometer; ambient-light-sensor; autoplay; battery; camera; document-domain; encrypted-media; fullscreen; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; oversized-images; payment; picture-in-picture; publickey-credentials-get; sync-xhr; usb; vr ; wake-lock; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-downloads"></iframe>
<h3 class="relative group"><a id="cration-de-dmos-multitapes" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#cration-de-dmos-multitapes"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a>
	<span>Cr√©ation de d√©mos multi-√©tapes
	</span></h3>

<p>Dans certains cas, vous pouvez vouloir une <em>d√©mo multi-√©tapes</em>, dans laquelle vous r√©utilisez la sortie d‚Äôune fonction comme entr√©e de la suivante. C‚Äôest tr√®s facile √† faire avec les <code>Blocks</code>, car vous pouvez utiliser un composant pour l‚Äôentr√©e d‚Äôun d√©clencheur d‚Äô√©v√©nement mais la sortie d‚Äôun autre. Regardez le composant texte dans l‚Äôexemple ci-dessous, sa valeur est le r√©sultat d‚Äôun mod√®le de conversion de la parole en texte, mais il est √©galement transmis √† un mod√®le d‚Äôanalyse des sentiments :</p>

	<div class="code-block relative"><div class="absolute top-2.5 right-4"><button class="inline-flex items-center relative text-sm focus:text-green-500 cursor-pointer focus:outline-none transition duration-200 ease-in-out opacity-0 mx-0.5   text-gray-600 " title="code excerpt" type="button"><svg class="" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z" transform="translate(0)"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z" transform="translate(0)"></path><rect fill="none" width="32" height="32"></rect></svg>
	<div class="absolute pointer-events-none transition-opacity bg-black text-white py-1 px-2 leading-tight rounded font-normal shadow left-1/2 top-full transform -translate-x-1/2 translate-y-2 opacity-0"><div class="absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-black border-4 border-t-0" style="border-left-color: transparent; border-right-color: transparent; "></div>
	Copied</div></button></div>
	<pre><!-- HTML_TAG_START --><span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> pipeline

<span class="hljs-keyword">import</span> gradio <span class="hljs-keyword">as</span> gr

asr = pipeline(<span class="hljs-string">&quot;automatic-speech-recognition&quot;</span>, <span class="hljs-string">&quot;facebook/wav2vec2-base-960h&quot;</span>)
classifier = pipeline(<span class="hljs-string">&quot;text-classification&quot;</span>)


<span class="hljs-keyword">def</span> <span class="hljs-title function_">speech_to_text</span>(<span class="hljs-params">speech</span>):
    text = asr(speech)[<span class="hljs-string">&quot;text&quot;</span>]
    <span class="hljs-keyword">return</span> text


<span class="hljs-keyword">def</span> <span class="hljs-title function_">text_to_sentiment</span>(<span class="hljs-params">text</span>):
    <span class="hljs-keyword">return</span> classifier(text)[<span class="hljs-number">0</span>][<span class="hljs-string">&quot;label&quot;</span>]


demo = gr.Blocks()

<span class="hljs-keyword">with</span> demo:
    audio_file = gr.Audio(<span class="hljs-built_in">type</span>=<span class="hljs-string">&quot;filepath&quot;</span>)
    text = gr.Textbox()
    label = gr.Label()

    b1 = gr.Button(<span class="hljs-string">&quot;Recognize Speech&quot;</span>)
    b2 = gr.Button(<span class="hljs-string">&quot;Classify Sentiment&quot;</span>)

    b1.click(speech_to_text, inputs=audio_file, outputs=text)
    b2.click(text_to_sentiment, inputs=text, outputs=label)

demo.launch()<!-- HTML_TAG_END --></pre></div>
<iframe src="https://hf.space/gradioiframe/course-demos/blocks_multi_step/+" frameborder="0" height="550" title="Gradio app" class="container p-0 flex-grow space-iframe" allow="accelerometer; ambient-light-sensor; autoplay; battery; camera; document-domain; encrypted-media; fullscreen; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; oversized-images; payment; picture-in-picture; publickey-credentials-get; sync-xhr; usb; vr ; wake-lock; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-downloads"></iframe>
<h3 class="relative group"><a id="mise-jour-des-proprits-des-composants" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#mise-jour-des-proprits-des-composants"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a>
	<span>Mise √† jour des propri√©t√©s des composants
	</span></h3>

<p>Jusqu‚Äô√† pr√©sent, nous avons vu comment cr√©er des √©v√©nements pour mettre √† jour la valeur d‚Äôun autre composant. Mais que se passe-t-il si vous voulez modifier d‚Äôautres propri√©t√©s d‚Äôun composant, comme la visibilit√© d‚Äôune zone de texte ou les choix dans un groupe de boutons radio ? Vous pouvez le faire en renvoyant la m√©thode <code>update()</code> d‚Äôune classe de composant au lieu d‚Äôune valeur de retour normale de votre fonction.</p>
<p>L‚Äôexemple le plus facile √† illustrer est le suivant :</p>

	<div class="code-block relative"><div class="absolute top-2.5 right-4"><button class="inline-flex items-center relative text-sm focus:text-green-500 cursor-pointer focus:outline-none transition duration-200 ease-in-out opacity-0 mx-0.5   text-gray-600 " title="code excerpt" type="button"><svg class="" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z" transform="translate(0)"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z" transform="translate(0)"></path><rect fill="none" width="32" height="32"></rect></svg>
	<div class="absolute pointer-events-none transition-opacity bg-black text-white py-1 px-2 leading-tight rounded font-normal shadow left-1/2 top-full transform -translate-x-1/2 translate-y-2 opacity-0"><div class="absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-black border-4 border-t-0" style="border-left-color: transparent; border-right-color: transparent; "></div>
	Copied</div></button></div>
	<pre><!-- HTML_TAG_START --><span class="hljs-keyword">import</span> gradio <span class="hljs-keyword">as</span> gr


<span class="hljs-keyword">def</span> <span class="hljs-title function_">change_textbox</span>(<span class="hljs-params">choice</span>):
    <span class="hljs-keyword">if</span> choice == <span class="hljs-string">&quot;short&quot;</span>:
        <span class="hljs-keyword">return</span> gr.Textbox.update(lines=<span class="hljs-number">2</span>, visible=<span class="hljs-literal">True</span>)
    <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">&quot;long&quot;</span>:
        <span class="hljs-keyword">return</span> gr.Textbox.update(lines=<span class="hljs-number">8</span>, visible=<span class="hljs-literal">True</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> gr.Textbox.update(visible=<span class="hljs-literal">False</span>)


<span class="hljs-keyword">with</span> gr.Blocks() <span class="hljs-keyword">as</span> block:
    radio = gr.Radio(
        [<span class="hljs-string">&quot;short&quot;</span>, <span class="hljs-string">&quot;long&quot;</span>, <span class="hljs-string">&quot;none&quot;</span>], label=<span class="hljs-string">&quot;What kind of essay would you like to write?&quot;</span>
    )
    text = gr.Textbox(lines=<span class="hljs-number">2</span>, interactive=<span class="hljs-literal">True</span>)

    radio.change(fn=change_textbox, inputs=radio, outputs=text)
    block.launch()<!-- HTML_TAG_END --></pre></div>
<iframe src="https://hf.space/gradioiframe/course-demos/blocks_update_component_properties/+" frameborder="0" height="300" title="Gradio app" class="container p-0 flex-grow space-iframe" allow="accelerometer; ambient-light-sensor; autoplay; battery; camera; document-domain; encrypted-media; fullscreen; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; oversized-images; payment; picture-in-picture; publickey-credentials-get; sync-xhr; usb; vr ; wake-lock; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-downloads"></iframe>
<p>Nous venons d‚Äôexplorer tous les concepts de base des <code>Blocks</code> ! Tout comme avec <code>Interface</code>, vous pouvez cr√©er des d√©mos sympas qui peuvent √™tre partag√©es en utilisant <code>share=True</code> dans la m√©thode <code>launch()</code> ou d√©ploy√©es sur <a href="https://huggingface.co/spaces" rel="nofollow"><em>Spaces</em></a>.</p>


		<script type="module" data-hydrate="11nlmn7">
		import { start } from "/docs/course/main/fr/_app/start-hf-doc-builder.js";
		start({
			target: document.querySelector('[data-hydrate="11nlmn7"]').parentNode,
			paths: {"base":"/docs/course/main/fr","assets":"/docs/course/main/fr"},
			session: {},
			route: false,
			spa: false,
			trailing_slash: "never",
			hydrate: {
				status: 200,
				error: null,
				nodes: [
					import("/docs/course/main/fr/_app/pages/__layout.svelte-hf-doc-builder.js"),
						import("/docs/course/main/fr/_app/pages/chapter9/7.mdx-hf-doc-builder.js")
				],
				params: {}
			}
		});
	</script>
