<meta charset="utf-8" /><meta http-equiv="content-security-policy" content=""><meta name="hf:doc:metadata" content="{&quot;local&quot;:&quot;the-command-line&quot;,&quot;sections&quot;:[{&quot;local&quot;:&quot;accelerate-config&quot;,&quot;title&quot;:&quot;accelerate config&quot;},{&quot;local&quot;:&quot;accelerate-defaultconfig&quot;,&quot;title&quot;:&quot;accelerate default-config &quot;},{&quot;local&quot;:&quot;accelerate-env&quot;,&quot;title&quot;:&quot;accelerate env&quot;},{&quot;local&quot;:&quot;accelerate-launch&quot;,&quot;title&quot;:&quot;accelerate launch&quot;},{&quot;local&quot;:&quot;accelerate-tpuconfig&quot;,&quot;title&quot;:&quot;accelerate tpu-config&quot;},{&quot;local&quot;:&quot;accelerate-test&quot;,&quot;title&quot;:&quot;accelerate test&quot;}],&quot;title&quot;:&quot;The Command Line &quot;}" data-svelte="svelte-1phssyn">
	<link rel="modulepreload" href="/docs/accelerate/main/en/_app/assets/pages/__layout.svelte-hf-doc-builder.css">
	<link rel="modulepreload" href="/docs/accelerate/main/en/_app/start-hf-doc-builder.js">
	<link rel="modulepreload" href="/docs/accelerate/main/en/_app/chunks/vendor-hf-doc-builder.js">
	<link rel="modulepreload" href="/docs/accelerate/main/en/_app/chunks/paths-hf-doc-builder.js">
	<link rel="modulepreload" href="/docs/accelerate/main/en/_app/pages/__layout.svelte-hf-doc-builder.js">
	<link rel="modulepreload" href="/docs/accelerate/main/en/_app/pages/package_reference/cli.mdx-hf-doc-builder.js">
	<link rel="modulepreload" href="/docs/accelerate/main/en/_app/chunks/IconCopyLink-hf-doc-builder.js">
	<link rel="modulepreload" href="/docs/accelerate/main/en/_app/chunks/CodeBlock-hf-doc-builder.js"> 






<h1 class="relative group"><a id="the-command-line" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#the-command-line"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a>
	<span>The Command Line 
	</span></h1>

<p>Below is a list of all the available commands ðŸ¤— Accelerate with their parameters</p>
<h2 class="relative group"><a id="accelerate-config" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#accelerate-config"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a>
	<span>accelerate config
	</span></h2>

<p><strong>Command</strong>:</p>
<p><code>accelerate config</code> or <code>accelerate-config</code></p>
<p>Launches a series of prompts to create and save a <code>default_config.yml</code> configuration file for your training system. Should
always be ran first on your machine.</p>
<p><strong>Usage</strong>: </p>

	<div class="code-block relative"><div class="absolute top-2.5 right-4"><button class="inline-flex items-center relative text-sm focus:text-green-500 cursor-pointer focus:outline-none transition duration-200 ease-in-out opacity-0 mx-0.5   text-gray-600 " title="code excerpt" type="button"><svg class="" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z" transform="translate(0)"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z" transform="translate(0)"></path><rect fill="none" width="32" height="32"></rect></svg>
	<div class="absolute pointer-events-none transition-opacity bg-black text-white py-1 px-2 leading-tight rounded font-normal shadow left-1/2 top-full transform -translate-x-1/2 translate-y-2 opacity-0"><div class="absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-black border-4 border-t-0" style="border-left-color: transparent; border-right-color: transparent; "></div>
	Copied</div></button></div>
	<pre><!-- HTML_TAG_START -->accelerate config [arguments]<!-- HTML_TAG_END --></pre></div>
<p><strong>Optional Arguments</strong>:</p>
<ul><li><code>--config_file CONFIG_FILE</code> (<code>str</code>) â€” The path to use to store the config file. Will default to a file named default_config.yaml in the cache location, which is the content
of the environment <code>HF_HOME</code> suffixed with â€˜accelerateâ€™, or if you donâ€™t have such an environment variable, your cache directory
(<code>~/.cache</code> or the content of <code>XDG_CACHE_HOME</code>) suffixed with <code>huggingface</code>.</li>
<li><code>-h</code>, <code>--help</code> (<code>bool</code>) â€” Show a help message and exit</li></ul>
<h2 class="relative group"><a id="accelerate-defaultconfig" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#accelerate-defaultconfig"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a>
	<span>accelerate default-config 
	</span></h2>

<p><strong>Command</strong>:</p>
<p><code>accelerate default-config</code> or <code>accelerate-default-config</code></p>
<p>Create a default config file for Accelerate with only a few flags set.</p>
<p><strong>Usage</strong>: </p>

	<div class="code-block relative"><div class="absolute top-2.5 right-4"><button class="inline-flex items-center relative text-sm focus:text-green-500 cursor-pointer focus:outline-none transition duration-200 ease-in-out opacity-0 mx-0.5   text-gray-600 " title="code excerpt" type="button"><svg class="" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z" transform="translate(0)"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z" transform="translate(0)"></path><rect fill="none" width="32" height="32"></rect></svg>
	<div class="absolute pointer-events-none transition-opacity bg-black text-white py-1 px-2 leading-tight rounded font-normal shadow left-1/2 top-full transform -translate-x-1/2 translate-y-2 opacity-0"><div class="absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-black border-4 border-t-0" style="border-left-color: transparent; border-right-color: transparent; "></div>
	Copied</div></button></div>
	<pre><!-- HTML_TAG_START -->accelerate default-config [arguments]<!-- HTML_TAG_END --></pre></div>
<p><strong>Optional Arguments</strong>:</p>
<ul><li><p><code>--config_file CONFIG_FILE</code> (<code>str</code>) â€” The path to use to store the config file. Will default to a file named default_config.yaml in the cache location, which is the content
of the environment <code>HF_HOME</code> suffixed with â€˜accelerateâ€™, or if you donâ€™t have such an environment variable, your cache directory
(<code>~/.cache</code> or the content of <code>XDG_CACHE_HOME</code>) suffixed with <code>huggingface</code>.</p></li>
<li><p><code>-h</code>, <code>--help</code> (<code>bool</code>) â€” Show a help message and exit</p></li>
<li><p><code>--mixed_precision {no,fp16,bf16}</code> (<code>str</code>) â€” Whether or not to use mixed precision training. Choose between FP16 and BF16 (bfloat16) training. BF16 training is only supported on Nvidia Ampere GPUs and PyTorch 1.10 or later.</p></li></ul>
<h2 class="relative group"><a id="accelerate-env" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#accelerate-env"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a>
	<span>accelerate env
	</span></h2>

<p><strong>Command</strong>:</p>
<p><code>accelerate env</code> or <code>accelerate-env</code></p>
<p>Lists the contents of the passed ðŸ¤— Accelerate configuration file. Should always be used when opening an issue on the <a href="https://github.com/huggingface/accelerate" rel="nofollow">GitHub repository</a>.</p>
<p><strong>Usage</strong>:</p>

	<div class="code-block relative"><div class="absolute top-2.5 right-4"><button class="inline-flex items-center relative text-sm focus:text-green-500 cursor-pointer focus:outline-none transition duration-200 ease-in-out opacity-0 mx-0.5   text-gray-600 " title="code excerpt" type="button"><svg class="" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z" transform="translate(0)"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z" transform="translate(0)"></path><rect fill="none" width="32" height="32"></rect></svg>
	<div class="absolute pointer-events-none transition-opacity bg-black text-white py-1 px-2 leading-tight rounded font-normal shadow left-1/2 top-full transform -translate-x-1/2 translate-y-2 opacity-0"><div class="absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-black border-4 border-t-0" style="border-left-color: transparent; border-right-color: transparent; "></div>
	Copied</div></button></div>
	<pre><!-- HTML_TAG_START -->accelerate <span class="hljs-built_in">env</span> [arguments]<!-- HTML_TAG_END --></pre></div>
<p><strong>Optional Arguments</strong>:</p>
<ul><li><code>--config_file CONFIG_FILE</code> (<code>str</code>) â€” The path to use to store the config file. Will default to a file named default_config.yaml in the cache location, which is the content
of the environment <code>HF_HOME</code> suffixed with â€˜accelerateâ€™, or if you donâ€™t have such an environment variable, your cache directory
(<code>~/.cache</code> or the content of <code>XDG_CACHE_HOME</code>) suffixed with <code>huggingface</code>.</li>
<li><code>-h</code>, <code>--help</code> (<code>bool</code>) â€” Show a help message and exit</li></ul>
<h2 class="relative group"><a id="accelerate-launch" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#accelerate-launch"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a>
	<span>accelerate launch
	</span></h2>

<p><strong>Command</strong>:</p>
<p><code>accelerate launch</code> or <code>accelerate-launch</code></p>
<p>Launches a specified script on a distributed system with the right parameters.</p>
<p><strong>Usage</strong>: </p>

	<div class="code-block relative"><div class="absolute top-2.5 right-4"><button class="inline-flex items-center relative text-sm focus:text-green-500 cursor-pointer focus:outline-none transition duration-200 ease-in-out opacity-0 mx-0.5   text-gray-600 " title="code excerpt" type="button"><svg class="" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z" transform="translate(0)"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z" transform="translate(0)"></path><rect fill="none" width="32" height="32"></rect></svg>
	<div class="absolute pointer-events-none transition-opacity bg-black text-white py-1 px-2 leading-tight rounded font-normal shadow left-1/2 top-full transform -translate-x-1/2 translate-y-2 opacity-0"><div class="absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-black border-4 border-t-0" style="border-left-color: transparent; border-right-color: transparent; "></div>
	Copied</div></button></div>
	<pre><!-- HTML_TAG_START -->accelerate launch [arguments] {training_script} --{training_script-argument-1} --{training_script-argument-2} ...<!-- HTML_TAG_END --></pre></div>
<p><strong>Positional Arguments</strong>:</p>
<ul><li><code>{training_script}</code> â€” The full path to the script to be launched in parallel</li>
<li><code>--{training_script-argument-1}</code> â€” Arguments of the training script</li></ul>
<p><strong>Optional Arguments</strong>:</p>
<ul><li><code>-h</code>, <code>--help</code> (<code>bool</code>) â€” Show a help message and exit</li>
<li><code>--config_file CONFIG_FILE</code> (<code>str</code>)â€” The config file to use for the default values in the launching script.</li>
<li><code>-m</code>, <code>--module</code> (<code>bool</code>) â€” Change each process to interpret the launch script as a Python module, executing with the same behavior as â€˜python -mâ€™.</li>
<li><code>--no_python</code> (<code>bool</code>) â€” Skip prepending the training script with â€˜pythonâ€™ - just execute it directly. Useful when the script is not a Python script.</li>
<li><code>--debug</code> (<code>bool</code>) â€” Whether to print out the torch.distributed stack trace when something fails.</li></ul>
<p>The rest of these arguments are configured through <code>accelerate config</code> and are read in from the specified <code>--config_file</code> (or default configuration) for their
values. They can also be passed in manually.</p>
<p><strong>Hardware Selection Arguments</strong>:</p>
<ul><li><code>--cpu</code> (<code>bool</code>) â€” Whether or not to force the training on the CPU.</li>
<li><code>--multi_gpu</code> (<code>bool</code>) â€” Whether or not this should launch a distributed GPU training.</li>
<li><code>--mps</code> (<code>bool</code>) â€” Whether or not this should use MPS-enabled GPU device on MacOS machines.</li>
<li><code>--tpu</code> (<code>bool</code>) â€” Whether or not this should launch a TPU training.</li></ul>
<p><strong>Resource Selection Arguments</strong>:</p>
<p>The following arguments are useful for fine-tuning how available hardware should be used</p>
<ul><li><code>--mixed_precision {no,fp16,bf16}</code> (<code>str</code>) â€” Whether or not to use mixed precision training. Choose between FP16 and BF16 (bfloat16) training. BF16 training is only supported on Nvidia Ampere GPUs and PyTorch 1.10 or later.</li>
<li><code>--num_processes NUM_PROCESSES</code> (<code>int</code>) â€” The total number of processes to be launched in parallel.</li>
<li><code>--num_machines NUM_MACHINES</code> (<code>int</code>) â€” The total number of machines used in this training.</li>
<li><code>--num_cpu_threads_per_process NUM_CPU_THREADS_PER_PROCESS</code> (<code>int</code>) â€” The number of CPU threads per process. Can be tuned for optimal performance.</li></ul>
<p><strong>Training Paradigm Arguments</strong>:</p>
<p>The following arguments are useful for selecting which training paradigm to use.</p>
<ul><li><code>--use_deepspeed</code> (<code>bool</code>) â€” Whether or not to use DeepSpeed for training.</li>
<li><code>--use_fsdp</code> (<code>bool</code>) â€” Whether or not to use FullyShardedDataParallel for training.</li>
<li><code>--use_megatron_lm</code> (<code>bool</code>) â€” Whether or not to use Megatron-LM for training.</li></ul>
<p><strong>Distributed GPU Arguments</strong>:</p>
<p>The following arguments are only useful when <code>multi_gpu</code> is passed or multi-gpu training is configured through <code>accelerate config</code>: </p>
<ul><li><code>--gpu_ids</code> (<code>str</code>) â€” What GPUs (by id) should be used for training on this machine as a comma-seperated list</li>
<li><code>--same_network</code> (<code>bool</code>) â€” Whether all machines used for multinode training exist on the same local network.</li>
<li><code>--machine_rank MACHINE_RANK</code> (<code>int</code>) â€” The rank of the machine on which this script is launched.</li>
<li><code>--main_process_ip MAIN_PROCESS_IP</code> (<code>str</code>) â€” The IP address of the machine of rank 0.</li>
<li><code>--main_process_port MAIN_PROCESS_PORT</code> (<code>int</code>) â€” The port to use to communicate with the machine of rank 0.</li>
<li><code>--rdzv_conf</code> (<code>str</code>) â€” Additional rendezvous configuration (&lt;key1&gt;=&lt;value1&gt;,&lt;key2&gt;=&lt;value2&gt;,â€¦).</li>
<li><code>--max_restarts</code> (<code>int</code>) â€” Maximum number of worker group restarts before failing.</li>
<li><code>--monitor_interval</code> (<code>float</code>) â€” Interval, in seconds, to monitor the state of workers.</li></ul>
<p><strong>TPU Arguments</strong>:</p>
<p>The following arguments are only useful when <code>tpu</code> is passed or TPU training is configured through <code>accelerate config</code>: </p>
<ul><li><code>--main_training_function MAIN_TRAINING_FUNCTION</code> (<code>str</code>) â€” The name of the main function to be executed in your script.</li>
<li><code>--downcast_bf16</code> (<code>bool</code>) â€” Whether when using bf16 precision on TPUs if both float and double tensors are cast to bfloat16 or if double tensors remain as float32.</li></ul>
<p><strong>DeepSpeed Arguments</strong>:</p>
<p>The following arguments are only useful when <code>use_deepspeed</code> is passed or <code>deepspeed</code> is configured through <code>accelerate config</code>: </p>
<ul><li><code>--deepspeed_config_file</code> (<code>str</code>) â€” DeepSpeed config file.</li>
<li><code>--zero_stage</code> (<code>int</code>) â€” DeepSpeedâ€™s ZeRO optimization stage.</li>
<li><code>--offload_optimizer_device</code> (<code>str</code>) â€” Decides where (none|cpu|nvme) to offload optimizer states.</li>
<li><code>--offload_param_device</code> (<code>str</code>) â€” Decides where (none|cpu|nvme) to offload parameters.</li>
<li><code>--gradient_accumulation_steps</code> (<code>int</code>) â€” No of gradient_accumulation_steps used in your training script.</li>
<li><code>--gradient_clipping</code> (<code>float</code>) â€” Gradient clipping value used in your training script.</li>
<li><code>--zero3_init_flag</code> (<code>str</code>) â€” Decides Whether (true|false) to enable <code>deepspeed.zero.Init</code> for constructing massive models. Only applicable with DeepSpeed ZeRO Stage-3.</li>
<li><code>--zero3_save_16bit_model</code> (<code>str</code>) â€” Decides Whether (true|false) to save 16-bit model weights when using ZeRO Stage-3. Only applicable with DeepSpeed ZeRO Stage-3.</li>
<li><code>--deepspeed_hostfile</code> (<code>str</code>) â€” DeepSpeed hostfile for configuring multi-node compute resources.</li>
<li><code>--deepspeed_exclusion_filter</code> (<code>str</code>) â€” DeepSpeed exclusion filter string when using mutli-node setup.</li>
<li><code>--deepspeed_inclusion_filter</code> (<code>str</code>) â€” DeepSpeed inclusion filter string when using mutli-node setup.</li>
<li><code>--deepspeed_multinode_launcher</code> (<code>str</code>) â€” DeepSpeed multi-node launcher to use.</li></ul>
<p><strong>Fully Sharded Data Parallelism Arguments</strong>:</p>
<p>The following arguments are only useful when <code>use_fdsp</code> is passed or Fully Sharded Data Parallelism is configured through <code>accelerate config</code>:</p>
<ul><li><code>--fsdp_offload_params</code> (<code>str</code>) â€” Decides Whether (true|false) to offload parameters and gradients to CPU.</li>
<li><code>--fsdp_min_num_params</code> (<code>int</code>) â€” FSDPâ€™s minimum number of parameters for Default Auto Wrapping.</li>
<li><code>--fsdp_sharding_strategy</code> (<code>int</code>) â€” FSDPâ€™s Sharding Strategy.</li>
<li><code>--fsdp_auto_wrap_policy</code> (<code>str</code>) â€” FSDPâ€™s auto wrap policy.</li>
<li><code>--fsdp_transformer_layer_cls_to_wrap</code> (<code>str</code>) â€” Transformer layer class name (case-sensitive) to wrap, e.g, <code>BertLayer</code>, <code>GPTJBlock</code>, <code>T5Block</code> â€¦</li>
<li><code>--fsdp_backward_prefetch_policy</code> (<code>str</code>) â€” FSDPâ€™s backward prefetch policy.</li>
<li><code>--fsdp_state_dict_type</code> (<code>str</code>) â€” FSDPâ€™s state dict type.</li></ul>
<p><strong>Megatron-LM Arguments</strong>:</p>
<p>The following arguments are only useful when <code>use_megatron_lm</code> is passed or Megatron-LM is configured through <code>accelerate config</code>:</p>
<ul><li><code>--megatron_lm_tp_degree</code> (â€œ) â€” Megatron-LMâ€™s Tensor Parallelism (TP) degree.</li>
<li><code>--megatron_lm_pp_degree</code> (â€œ) â€” Megatron-LMâ€™s Pipeline Parallelism (PP) degree.</li>
<li><code>--megatron_lm_num_micro_batches</code> (â€œ) â€” Megatron-LMâ€™s number of micro batches when PP degree &gt; 1.</li>
<li><code>--megatron_lm_sequence_parallelism</code> (â€œ) â€” Decides Whether (true|false) to enable Sequence Parallelism when TP degree &gt; 1.</li>
<li><code>--megatron_lm_recompute_activations</code> (â€œ) â€” Decides Whether (true|false) to enable Selective Activation Recomputation.</li>
<li><code>--megatron_lm_use_distributed_optimizer</code> (â€œ) â€” Decides Whether (true|false) to use distributed optimizer which shards optimizer state and gradients across Data Pralellel (DP) ranks.</li>
<li><code>--megatron_lm_gradient_clipping</code> (â€œ) â€” Megatron-LMâ€™s gradient clipping value based on global L2 Norm (0 to disable).</li></ul>
<p><strong>AWS SageMaker Arguments</strong>:</p>
<p>The following arguments are only useful when training in SageMaker</p>
<ul><li><code>--aws_access_key_id AWS_ACCESS_KEY_ID</code> (<code>str</code>) â€” The AWS_ACCESS_KEY_ID used to launch the Amazon SageMaker training job</li>
<li><code>--aws_secret_access_key AWS_SECRET_ACCESS_KEY</code> (<code>str</code>) â€” The AWS_SECRET_ACCESS_KEY used to launch the Amazon SageMaker training job</li></ul>
<h2 class="relative group"><a id="accelerate-tpuconfig" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#accelerate-tpuconfig"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a>
	<span>accelerate tpu-config
	</span></h2>

<p><code>accelerate tpu-config</code></p>
<p><strong>Usage</strong>:</p>

	<div class="code-block relative"><div class="absolute top-2.5 right-4"><button class="inline-flex items-center relative text-sm focus:text-green-500 cursor-pointer focus:outline-none transition duration-200 ease-in-out opacity-0 mx-0.5   text-gray-600 " title="code excerpt" type="button"><svg class="" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z" transform="translate(0)"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z" transform="translate(0)"></path><rect fill="none" width="32" height="32"></rect></svg>
	<div class="absolute pointer-events-none transition-opacity bg-black text-white py-1 px-2 leading-tight rounded font-normal shadow left-1/2 top-full transform -translate-x-1/2 translate-y-2 opacity-0"><div class="absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-black border-4 border-t-0" style="border-left-color: transparent; border-right-color: transparent; "></div>
	Copied</div></button></div>
	<pre><!-- HTML_TAG_START -->accelerate tpu-config [arguments]<!-- HTML_TAG_END --></pre></div>
<p><strong>Optional Arguments</strong>:</p>
<ul><li><code>-h</code>, <code>--help</code> (<code>bool</code>) â€” Show a help message and exit</li></ul>
<p><strong>Config Arguments</strong>:</p>
<p>Arguments that can be configured through <code>accelerate config</code>.</p>
<ul><li><code>--config_file</code> (<code>str</code>) â€” Path to the config file to use for accelerate.</li>
<li><code>--tpu_name</code> (<code>str</code>) â€” The name of the TPU to use. If not specified, will use the TPU specified in the config file.</li>
<li><code>--tpu_zone</code> (<code>str</code>) â€” The zone of the TPU to use. If not specified, will use the zone specified in the config file.</li></ul>
<p><strong>TPU Arguments</strong>:</p>
<p>Arguments for options ran inside the TPU.</p>
<ul><li><code>--command_file</code> (<code>str</code>) â€” The path to the file containing the commands to run on the pod on startup.</li>
<li><code>--command</code> (<code>str</code>) â€” A command to run on the pod. Can be passed multiple times.</li>
<li><code>--install_accelerate</code> (<code>bool</code>) â€” Whether to install accelerate on the pod. Defaults to False.</li>
<li><code>--accelerate_version</code> (<code>str</code>) â€” The version of accelerate to install on the pod. If not specified, will use the latest pypi version. Specify â€˜devâ€™ to install from GitHub.</li>
<li><code>--debug</code> (<code>bool</code>) â€” If set, will print the command that would be run instead of running it.</li></ul>
<h2 class="relative group"><a id="accelerate-test" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#accelerate-test"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a>
	<span>accelerate test
	</span></h2>

<p><code>accelerate test</code> or <code>accelerate-test</code></p>
<p>Runs <code>accelerate/test_utils/test_script.py</code> to verify that ðŸ¤— Accelerate has been properly configured on your system and runs. </p>
<p><strong>Usage</strong>: </p>

	<div class="code-block relative"><div class="absolute top-2.5 right-4"><button class="inline-flex items-center relative text-sm focus:text-green-500 cursor-pointer focus:outline-none transition duration-200 ease-in-out opacity-0 mx-0.5   text-gray-600 " title="code excerpt" type="button"><svg class="" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z" transform="translate(0)"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z" transform="translate(0)"></path><rect fill="none" width="32" height="32"></rect></svg>
	<div class="absolute pointer-events-none transition-opacity bg-black text-white py-1 px-2 leading-tight rounded font-normal shadow left-1/2 top-full transform -translate-x-1/2 translate-y-2 opacity-0"><div class="absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-black border-4 border-t-0" style="border-left-color: transparent; border-right-color: transparent; "></div>
	Copied</div></button></div>
	<pre><!-- HTML_TAG_START -->accelerate <span class="hljs-built_in">test</span> [arguments]<!-- HTML_TAG_END --></pre></div>
<p><strong>Optional Arguments</strong>:</p>
<ul><li><code>--config_file CONFIG_FILE</code> (<code>str</code>) â€” The path to use to store the config file. Will default to a file named default_config.yaml in the cache location, which is the content
of the environment <code>HF_HOME</code> suffixed with â€˜accelerateâ€™, or if you donâ€™t have such an environment variable, your cache directory
(<code>~/.cache</code> or the content of <code>XDG_CACHE_HOME</code>) suffixed with <code>huggingface</code>.</li>
<li><code>-h</code>, <code>--help</code> (<code>bool</code>) â€” Show a help message and exit</li></ul>


		<script type="module" data-hydrate="9dg5ly">
		import { start } from "/docs/accelerate/main/en/_app/start-hf-doc-builder.js";
		start({
			target: document.querySelector('[data-hydrate="9dg5ly"]').parentNode,
			paths: {"base":"/docs/accelerate/main/en","assets":"/docs/accelerate/main/en"},
			session: {},
			route: false,
			spa: false,
			trailing_slash: "never",
			hydrate: {
				status: 200,
				error: null,
				nodes: [
					import("/docs/accelerate/main/en/_app/pages/__layout.svelte-hf-doc-builder.js"),
						import("/docs/accelerate/main/en/_app/pages/package_reference/cli.mdx-hf-doc-builder.js")
				],
				params: {}
			}
		});
	</script>
